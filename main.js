!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s,this._getViews()}_getViews(){this._cardElement=document.getElementById(this._cardSelector).content.cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._trashButton=this._cardElement.querySelector(".card_trash-button"),this._likeButton=this._cardElement.querySelector(".card__like-btn")}getCardElement(){return this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}_setEventListeners(){this._trashButton.addEventListener("click",this._handleRemoveCard),this._likeButton.addEventListener("click",this._handleLike),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleRemoveCard(e){e.target.closest(".card").remove()}_handleLike(e){e.target.classList.toggle("card__like-btn-active")}}const t={formSelector:".model__form",inputSelector:".model__form-input",submitButtonSelector:".model__submit-button",inactiveButtonClass:"model__submit-button-inactive",inputErrorClass:"-input-error",errorClass:"model__input-error-active"},s=document.querySelector(".profile__edit-button"),n=document.querySelector(".profile__add-button"),o=document.querySelectorAll(".model__form");class i{constructor(e){let{selector:t}=e;this._popupElement=document.querySelector(t),this._closeButtons=this._popupElement.querySelector(".model__close-button")}open(){this._popupElement.classList.add("model_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("model_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"==e.key&&this.close()};setEveentListeners(){this._closeButtons.addEventListener("click",(e=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.currentTarget===e.target&&this.close()}))}}class r extends i{constructor(e,t,s){super({selector:e}),this._popupForm=this._popupElement.querySelector(".model__form"),this._inputList=Array.from(this._popupForm.querySelectorAll("input")),this._handleFormSubmit=t,this._validator=s}close(){super.close()}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEveentListeners(){super.setEveentListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset(),this._validator.toggleButtonState(),this.close()}))}}class a{constructor(e,t){this._options=e,this._formElement=t,this._getViews()}_getViews(){this._inputList=Array.from(this._formElement.querySelectorAll(this._options.inputSelector)),this._buttonElement=this._formElement.querySelector(this._options.submitButtonSelector)}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.name}${this._options.inputErrorClass}`);s.textContent=t,s.classList.add(this._options.errorClass)}forceHideInputError(){this._inputList.forEach((e=>{this._hideInputError(e)}))}_hideInputError(e){const t=this._formElement.querySelector(`.${e.name}${this._options.inputErrorClass}`);t.classList.remove(this._options.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._hasInvalidInput()&&!e?(this._buttonElement.classList.add(this._options.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._options.inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}}const l={};o.forEach((e=>{console.log(e.id),l[e.id]=new a(t,e),l[e.id].enableValidation()})),console.log(l);const c=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._elementsContainer=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this._elementsContainer.prepend(e):this._elementsContainer.appendChild(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{c.addItem(p(e))}},".galery__cards"),m=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameLabel=document.querySelector(t),this._jobLabel=document.querySelector(s)}getUserInfo(){return{name:this._nameLabel.textContent,job:this._jobLabel.textContent}}setUserInfo(e,t){this._nameLabel.textContent=e,this._jobLabel.textContent=t}}({nameSelector:".profile__title",jobSelector:".profile__subtitle"}),u=new r("#modal-profile",(e=>{m.setUserInfo(e.name,e.job)}),l.profile),_=new r("#modal-cards",(e=>{c.addItem(p({name:e.title,link:e.link}),!0)}),l.cards),d=new class extends i{constructor(e){super({selector:e}),this._image=this._popupElement.querySelector(".model__image"),this._imageLabel=this._popupElement.querySelector(".model__image-label")}open(e){this._image.src=e.link,this._image.alt=e.name,this._imageLabel.textContent=e.name,super.open()}}("#modal-image");s.addEventListener("click",(()=>{u.setInputValues(m.getUserInfo()),u.open()})),n.addEventListener("click",(()=>{_.open()}));const h=(e,t)=>{d.open({name:e,link:t})},p=t=>new e(t,"card-template",h).getCardElement();u.setEveentListeners(),_.setEveentListeners(),d.setEveentListeners(),c.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q1hrRCxFQUFlTSxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5fZ2V0Vmlld3MoKTtcbiAgfVxuXG4gIF9nZXRWaWV3cygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfdHJhc2gtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICB9XG5cbiAgZ2V0Q2FyZEVsZW1lbnQoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fdHJhc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVJlbW92ZUNhcmQpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2UpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVSZW1vdmVDYXJkKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmNhcmRcIik7XG4gICAgY2FyZC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlKGV2ZW50KSB7XG4gICAgY29uc3QgY3VycmVudENsYXNzTGlzdCA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3Q7XG4gICAgY3VycmVudENsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bi1hY3RpdmVcIik7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IG9wdGlvbnNWYWxpZGF0aW9uID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGVsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGVsX19mb3JtLWlucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RlbF9fc3VibWl0LWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGVsX19zdWJtaXQtYnV0dG9uLWluYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCItaW5wdXQtZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RlbF9faW5wdXQtZXJyb3ItYWN0aXZlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgYWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IG1vZGFsc0Zvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RlbF9fZm9ybVwiKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBzZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b25zID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RlbF9fY2xvc2UtYnV0dG9uXCJcbiAgICApO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGVsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGVsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdXR0b25zLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC5jdXJyZW50VGFyZ2V0ID09PSBldnQudGFyZ2V0KSB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgdmFsaWRhdG9yKSB7XG4gICAgc3VwZXIoeyBzZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RlbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXRcIikpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3ZhbGlkYXRvciA9IHZhbGlkYXRvcjtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0RXZlZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZWVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgICAgdGhpcy5fdmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2dldFZpZXdzKCk7XG4gIH1cblxuICBfZ2V0Vmlld3MoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fb3B0aW9ucy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG5cbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX29wdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQubmFtZX0ke3RoaXMuX29wdGlvbnMuaW5wdXRFcnJvckNsYXNzfWBcbiAgICApO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgZm9yY2VIaWRlSW5wdXRFcnJvcigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50Lm5hbWV9JHt0aGlzLl9vcHRpb25zLmlucHV0RXJyb3JDbGFzc31gXG4gICAgKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoZm9yY2VEaXNhYmxlID0gZmFsc2UpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkgJiYgIWZvcmNlRGlzYWJsZSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX29wdGlvbnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIGVkaXRCdXR0b24sXG4gIGFkZEJ1dHRvbixcbiAgb3B0aW9uc1ZhbGlkYXRpb24sXG4gIG1vZGFsc0Zvcm1zLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5cbmNvbnN0IGZvcm12YWxpZGF0b3JMaXN0ID0ge307XG5cbm1vZGFsc0Zvcm1zLmZvckVhY2goKGZvcm0pID0+IHtcbiAgY29uc29sZS5sb2coZm9ybS5pZCk7XG4gIGZvcm12YWxpZGF0b3JMaXN0W2Zvcm0uaWRdID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9uc1ZhbGlkYXRpb24sIGZvcm0pO1xuICBmb3JtdmFsaWRhdG9yTGlzdFtmb3JtLmlkXS5lbmFibGVWYWxpZGF0aW9uKCk7XG59KTtcblxuY29uc29sZS5sb2coZm9ybXZhbGlkYXRvckxpc3QpO1xuXG5jb25zdCBnYWxsZXJ5U2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcbiAgICAgIGdhbGxlcnlTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG4gICAgfSxcbiAgfSxcbiAgXCIuZ2FsZXJ5X19jYXJkc1wiXG4pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG59KTtcblxuY29uc3QgcHJvZmlsZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI21vZGFsLXByb2ZpbGVcIixcbiAgKGZvcm1EYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZm9ybURhdGEubmFtZSwgZm9ybURhdGEuam9iKTtcbiAgfSxcbiAgZm9ybXZhbGlkYXRvckxpc3RbXCJwcm9maWxlXCJdXG4pO1xuY29uc3QgY2FyZHNNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNtb2RhbC1jYXJkc1wiLFxuICAoZm9ybURhdGEpID0+IHtcbiAgICBnYWxsZXJ5U2VjdGlvbi5hZGRJdGVtKFxuICAgICAgY3JlYXRlQ2FyZCh7IG5hbWU6IGZvcm1EYXRhLnRpdGxlLCBsaW5rOiBmb3JtRGF0YS5saW5rIH0pLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH0sXG4gIGZvcm12YWxpZGF0b3JMaXN0W1wiY2FyZHNcIl1cbik7XG5jb25zdCBpbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsLWltYWdlXCIpO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVNb2RhbC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgcHJvZmlsZU1vZGFsLm9wZW4oKTtcbn0pO1xuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNhcmRzTW9kYWwub3BlbigpO1xufSk7XG5cbmNvbnN0IGhhbmRsZUltYWdlQ2xpY2sgPSAobmFtZSwgbGluaykgPT4ge1xuICBpbWFnZU1vZGFsLm9wZW4oeyBuYW1lOiBuYW1lLCBsaW5rOiBsaW5rIH0pO1xufTtcblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PlxuICBuZXcgQ2FyZChkYXRhLCBcImNhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljaykuZ2V0Q2FyZEVsZW1lbnQoKTtcblxucHJvZmlsZU1vZGFsLnNldEV2ZWVudExpc3RlbmVycygpO1xuY2FyZHNNb2RhbC5zZXRFdmVlbnRMaXN0ZW5lcnMoKTtcbmltYWdlTW9kYWwuc2V0RXZlZW50TGlzdGVuZXJzKCk7XG5nYWxsZXJ5U2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2VsZW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oaXRlbSwgaXNQdXRPbkZpcnN0UGxhc2UgPSBmYWxzZSkge1xuICAgIGlmIChpc1B1dE9uRmlyc3RQbGFzZSkgdGhpcy5fZWxlbWVudHNDb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgICBlbHNlIHRoaXMuX2VsZW1lbnRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVMYWJlbC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iTGFiZWwudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcbiAgICB0aGlzLl9uYW1lTGFiZWwudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkxhYmVsLnRleHRDb250ZW50ID0gam9iO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBzZWxlY3RvciB9KTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGVsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9pbWFnZUxhYmVsID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kZWxfX2ltYWdlLWxhYmVsXCIpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2ltYWdlLmFsdCA9IGRhdGEubmFtZTtcblxuICAgIHRoaXMuX2ltYWdlTGFiZWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFZpZXdzIiwiX2NhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZEltYWdlIiwicXVlcnlTZWxlY3RvciIsIl9jYXJkVGl0bGUiLCJfdHJhc2hCdXR0b24iLCJfbGlrZUJ1dHRvbiIsImdldENhcmRFbGVtZW50Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZVJlbW92ZUNhcmQiLCJfaGFuZGxlTGlrZSIsImV2ZW50IiwidGFyZ2V0IiwiY2xvc2VzdCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm9wdGlvbnNWYWxpZGF0aW9uIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwibW9kYWxzRm9ybXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiUG9wdXAiLCJfcmVmIiwic2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9ucyIsIm9wZW4iLCJhZGQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVlbnRMaXN0ZW5lcnMiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJ2YWxpZGF0b3IiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfdmFsaWRhdG9yIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJGb3JtVmFsaWRhdG9yIiwib3B0aW9ucyIsImZvcm1FbGVtZW50IiwiX29wdGlvbnMiLCJfZm9ybUVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImZvcmNlSGlkZUlucHV0RXJyb3IiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJmb3JjZURpc2FibGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJkaXNhYmxlZCIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtdmFsaWRhdG9yTGlzdCIsImZvcm0iLCJjb25zb2xlIiwibG9nIiwiaWQiLCJnYWxsZXJ5U2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfZWxlbWVudHNDb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImFwcGVuZENoaWxkIiwiY3JlYXRlQ2FyZCIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUxhYmVsIiwiX2pvYkxhYmVsIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVNb2RhbCIsImZvcm1EYXRhIiwiY2FyZHNNb2RhbCIsInRpdGxlIiwiaW1hZ2VNb2RhbCIsIl9pbWFnZSIsIl9pbWFnZUxhYmVsIl0sInNvdXJjZVJvb3QiOiIifQ==